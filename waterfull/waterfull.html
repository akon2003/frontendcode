<!DOCTYPE html>
<html>
<head>
	<title>瀑布流</title>
</head>
<style type="text/css">
.content{
		position: relative;


		}


		.item{
			position: absolute;
			width: 200px;
			margin-right: 10px;
			margin-top: 10px;
			transition: all 1s;
		}

		.h1{
			height: 200px;
			background-color: #f4b300;
		}

		.h2{
			height: 300px;
			background-color: #691BB8;
		}

		.h3{
			height: 400px;
			background-color: #006ac1;
		}


</style>
<body>
	<div class="content">
		<div class="item h1">1</div>
		<div class="item h2">2</div>
		<div class="item h3">3</div>
		<div class="item h3">4</div>
		<div class="item h2">5</div>
		<div class="item h1">6</div>
		<div class="item h2">7</div>
		<div class="item h3">8</div>
		<div class="item h1">1</div>
		<div class="item h1">1</div>
		<div class="item h1">1</div>

		
	</div>

</body>
<script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">




 waterfull()
$(window).on('resize',function(){

	waterfull()





})

function waterfull(){

	var nodeWidth = $('.item').outerWidth(true);
	var colNum =parseInt( $('.content').width()/ nodeWidth);
	var itemArry = []
	for(var i = 0; i<colNum;i++){
	 	itemArry.push(0);
	 	}


	$('.item').each(function(){
		var $cur=$(this);	
		var minvalue=itemArry[0];
		var idx=0;
		console.log(minvalue)
		console.log(idx)
		for(var i = 0 ;i<colNum;i++){

			if(itemArry[i]<minvalue){
			idx=i;
			minvalue=itemArry[i]
			}
			console.log(minvalue)
			console.log(idx)
		} 

		$cur.css({
			left:idx*nodeWidth,
			top: minvalue

		});
		itemArry[idx]+=$cur.outerHeight(true)

		console.log(itemArry[idx])
	});
	
}


</script>
</html>